@using SignalRMVCApp.Models
@model Notification

<script type="text/javascript">

    document.addEventListener('DOMContentLoaded', ready);
    var userId = Math.floor((Math.random() * 100) + 1);

    function ready() {
        //random number between 1 and 100 for a demo userId
        document.getElementById("userId").innerHTML = userId;
        $("#UserId").val(userId);
        setSubmit();
    }

    function setSubmit() {
        $('form').submit(function () {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    $("#Header").val('');
                    $("#Content").val('');
                },
                error: function (d) {
                    alert("error");
                }
            });

            //$.ajax({
            //    url: '/hubs/notification',
            //    type: this.method,
            //    data: $(this).serialize(),
            //    success: function (result) {
            //        $("#Header").val('');
            //        $("#Content").val('');
            //    },
            //    error: function (d) {
            //        console.log(d);
            //        alert("error");
            //    }
            //});
            return false;
        });
    }

</script>
<script src='~/lib/signalr/signalr.js?v=3'></script>
<script src='~/js/user-notification.js?v=3'></script>